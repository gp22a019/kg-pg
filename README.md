# KG Search for Wikidata - 改良版

## プロジェクト概要
- **名前**: KG Search for Wikidata - 改良版
- **目標**: Wikidataを使った軽量で使いやすい知識グラフ検索システム
- **特徴**: 
  - オリジナルKG Searchの手法を踏襲した2段階検索プロセス
  - 日本語ラベル優先表示
  - Googleライクなインターフェース
  - インライン詳細展開機能
  - テーブル形式の検索結果表示

## URL
- **デモ**: https://3000-iruruj8ba0oio6yfpqe5a-6532622b.e2b.dev
- **GitHub**: (設定予定)

## 完成した機能
✅ **基本検索機能**
- Wikimedia API + SPARQLクエリによる2段階検索
- 日本語/英語言語選択対応
- 検索結果のページネーション（20件ずつ追加読み込み）

✅ **フロントエンド機能**  
- Googleライクな検索インターフェース
- レスポンシブデザイン（TailwindCSS）
- 検索結果のテーブル表示（QID、ラベル、詳細列）
- ローディングアニメーション

✅ **詳細情報機能**
- テーブル内インライン展開
- エンティティプロパティの日本語表示
- 画像・リンク・データの適切な表示形式
- プロパティの日本語ラベルマッピング

✅ **API機能**
- `/api/search` - エンティティ検索（オリジナルKG Search方式）
- `/api/entity/:id` - エンティティ詳細取得

## 機能URI一覧
- **メインページ**: `/` - 検索インターフェース
- **検索API**: `/api/search?q={query}&lang={ja|en}&limit={数}&offset={数}`
  - 例: `/api/search?q=アインシュタイン&lang=ja&limit=5`
- **詳細API**: `/api/entity/{QID}?lang={ja|en}`
  - 例: `/api/entity/Q937?lang=ja`
- **静的ファイル**: `/static/app.js`, `/static/style.css`

## データアーキテクチャ
- **データモデル**: Wikidata エンティティ（QID）+ プロパティ + 値
- **検索プロセス**: 
  1. Wikimedia wbsearchentities API → エンティティID収集
  2. SPARQL クエリ（VALUES句使用）→ 詳細情報取得
- **ストレージサービス**: なし（完全にステートレス）
- **データフロー**: 
  ```
  ユーザー入力 → Wikimedia API → エンティティID → SPARQL → 結果表示
                                                    ↓
                            詳細クリック → SPARQL詳細クエリ → インライン展開
  ```

## 使用方法
1. トップページで検索キーワードを入力
2. 言語を選択（日本語/英語）
3. 「Wikidata検索」ボタンをクリック
4. 検索結果のテーブルで「詳細」ボタンをクリックして詳細情報を展開
5. 「さらに読み込む」で追加結果を取得

## 技術的改善点
### オリジナルKG Searchからの継承
- **2段階検索**: エンティティ収集 → SPARQL詳細取得
- **VALUES句**: 効率的なSPARQLクエリパターン
- **テーブル表示**: QID、ラベル、詳細の3列構造

### フロントエンド改良
- **Googleライク**: 洗練されたUI/UX
- **日本語優先**: wikibase:labelサービス活用
- **インライン展開**: モーダルからテーブル内展開に変更
- **レスポンシブ**: モバイル対応

## デプロイメント
- **プラットフォーム**: Cloudflare Pages対応
- **ステータス**: ✅ 開発環境で動作中
- **技術スタック**: Hono + TypeScript + TailwindCSS + Vite
- **最終更新**: 2025-09-29

## 未実装機能
- Cloudflare Pages本番デプロイ
- GitHub リポジトリ連携
- 検索履歴機能
- お気に入り機能
- 高度な検索フィルター

## 推奨する次のステップ
1. **GitHub連携**: GitHubリポジトリ作成と連携設定
2. **本番デプロイ**: Cloudflare Pagesへの本番デプロイ
3. **機能拡張**: 検索履歴、お気に入り、高度フィルター
4. **パフォーマンス**: キャッシュ機能の追加
5. **多言語対応**: より多くの言語サポート

## 開発環境での実行
```bash
npm run build
pm2 start ecosystem.config.cjs
npm run test
```

## 特記事項
- 本プロジェクトはオリジナルKGSearchの手法を踏襲しつつ、フロントエンドとデータ表示部分を大幅に改良した版です
- WikidataのSPARQLエンドポイントを使用しているため、外部API依存があります
- 完全にステートレスな設計で、Cloudflare Workersに最適化されています